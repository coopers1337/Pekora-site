<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>User Info Tracker</title>
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
                <link rel="stylesheet" href="/styles.css">
                </head>
            <body>
                <div class="container mt-4">
                    <h1>User Recent Tracker</h1>
                    <h4>Auto-updates every 30 seconds</h4>
                    <div class="row">
                        <div id="latestUserInfo" class="col-md-6 mb-4">Loading latest user...</div>
                        <div id="nextUserInfo" class="col-md-6 mb-4">Loading next user...</div>
                    </div>
                    <div id="status"></div>
                </div>

                <script>
                    async function fetchUserInfo() {
                        try {
                            const response = await fetch('/api/index.php');
                            const data = await response.json();
                            const latestUserInfoDiv = document.getElementById('latestUserInfo');
                            const nextUserInfoDiv = document.getElementById('nextUserInfo');
const statusDiv = document.getElementById('status');

                            // Latest User (ID 10900)
                            if (data.latestUser) {
                                const latestAvatarHtml = data.latestAvatar && data.latestAvatar.state === 'Completed'
                                    ? `<img id="latestAvatar" src="https://www.pekora.zip${data.latestAvatar.imageUrl}" alt="Latest User Avatar">`
                                    : '<p>No avatar available.</p>';
                                latestUserInfoDiv.innerHTML = `
                                    <h5>Latest User (ID: 10900)</h5>
                                    ${latestAvatarHtml}
                                    <p><strong>Name:</strong> ${data.latestUser.name}</p>
                                    <p><strong>Display Name:</strong> ${data.latestUser.displayName}</p>
                                    <p><strong>Created:</strong> ${new Date(data.latestUser.created).toLocaleString()}</p>
                                    <p><strong>RAP:</strong> ${data.latestUser.inventory_rap}</p>
                                    <p><strong>Verified:</strong> ${data.latestUser.hasVerifiedBadge ? 'Yes' : 'No'}</p>
                                    <p><strong>Staff:</strong> ${data.latestUser.isStaff ? 'Yes' : 'No'}</p>
                                    <p><strong>Banned:</strong> ${data.latestUser.isBanned ? 'Yes' : 'No'}</p>
                                    <p><strong>Description:</strong> ${data.latestUser.description || 'None'}</p>
                                `;
                            } else {
                                latestUserInfoDiv.innerHTML = '<p>Latest user data unavailable.</p>';
                            }

                            // Next User (ID 10901)
                            if (data.nextUser.error) {
                                nextUserInfoDiv.innerHTML = '<p>Next user (ID: 10901) not found.</p>';
                                statusDiv.innerHTML = 'Checking for new user...';
                            } else {
                                const nextAvatarHtml = data.nextAvatar && data.nextAvatar.state === 'Completed'
                                    ? `<img id="nextAvatar" src="https://www.pekora.zip${data.nextAvatar.imageUrl}" alt="Next User Avatar">`
                                    : '<p>No avatar available.</p>';
                                nextUserInfoDiv.innerHTML = `
                                    <h5>Next User (ID: 10901)</h5>
                                    ${nextAvatarHtml}
                                    <p><strong>Name:</strong> ${data.nextUser.name}</p>
                                    <p><strong>Display Name:</strong> ${data.nextUser.displayName}</p>
                                    <p><strong>Created:</strong> ${new Date(data.nextUser.created).toLocaleString()}</p>
                                    <p><strong>RAP:</strong> ${data.nextUser.inventory_rap}</p>
                                    <p><strong>Verified:</strong> ${data.nextUser.hasVerifiedBadge ? 'Yes' : 'No'}</p>
                                    <p><strong>Staff:</strong> ${data.nextUser.isStaff ? 'Yes' : 'No'}</p>
                                    <p><strong>Banned:</strong> ${data.nextUser.isBanned ? 'Yes' : 'No'}</p>
                                    <p><strong>Description:</strong> ${data.nextUser.description || 'None'}</p>
                                `;
                                statusDiv.innerHTML = 'New user found! Checking again in 30 seconds...';
                            }
                        } catch (error) {
                            document.getElementById('status').innerHTML = 'Error fetching data: ' + error;
                        }
                    }

                    // Initial fetch
                    fetchUserInfo();

                    // Auto-update every 30 seconds
                    setInterval(fetchUserInfo, 30000);
                </script>
            </body>
        </html>
